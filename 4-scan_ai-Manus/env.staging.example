# =============================================================================
# Gaara Scan AI - Staging Environment Variables
# =============================================================================
# 
# IMPORTANT: Copy this file to .env.staging and fill in real values
# This environment is for testing before production
#
# Last Updated: 2026-01-19
# =============================================================================

# =============================================================================
# Application Settings
# =============================================================================
ENVIRONMENT=staging
DEBUG=true
APP_VERSION=4.3.1
TZ=UTC
LOG_LEVEL=debug

# =============================================================================
# Security Settings
# =============================================================================
# Generate with: openssl rand -hex 64
SECRET_KEY=staging_secret_key_replace_me_with_64_char_string
JWT_SECRET=staging_jwt_secret_replace_me_32chars
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=60
JWT_REFRESH_TOKEN_EXPIRE_DAYS=30

# Security Features (more lenient for testing)
MAX_LOGIN_ATTEMPTS=10
LOCKOUT_DURATION_MINUTES=5
RATE_LIMIT_PER_MINUTE=500

# =============================================================================
# Database Configuration (PostgreSQL)
# =============================================================================
POSTGRES_HOST=scan_ai-Manus-database
POSTGRES_PORT=8502
POSTGRES_DB=gaara_scan_ai_staging
POSTGRES_USER=gaara_staging
POSTGRES_PASSWORD=staging_db_password_change_me

DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}

DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20
DB_POOL_TIMEOUT=30

# =============================================================================
# Redis Configuration
# =============================================================================
REDIS_HOST=scan_ai-Manus-redis
REDIS_PORT=6379
REDIS_DB=1
REDIS_PASSWORD=staging_redis_password_change_me

REDIS_URL=redis://:${REDIS_PASSWORD}@${REDIS_HOST}:${REDIS_PORT}/${REDIS_DB}

# =============================================================================
# Backend API Settings
# =============================================================================
BACKEND_HOST=scan_ai-Manus-backend
BACKEND_PORT=4001
WORKERS=2

# CORS Settings (more permissive for staging)
ALLOWED_ORIGINS=https://staging.gaara-scan-ai.com,http://localhost:3000,http://localhost:5173
ALLOWED_METHODS=GET,POST,PUT,DELETE,PATCH,OPTIONS
ALLOWED_HEADERS=*
ALLOW_CREDENTIALS=true

# =============================================================================
# Frontend Settings
# =============================================================================
FRONTEND_HOST=scan_ai-Manus-frontend
FRONTEND_PORT=4501
VITE_API_URL=https://staging-api.gaara-scan-ai.com/api/v1
VITE_UPLOAD_URL=https://staging-api.gaara-scan-ai.com/uploads

# =============================================================================
# ML Service Settings
# =============================================================================
ML_HOST=scan_ai-Manus-ml
ML_PORT=4101
ML_WORKERS=1
MODEL_PATH=/app/models
CONFIDENCE_THRESHOLD=0.4

# =============================================================================
# AI Service Settings
# =============================================================================
AI_HOST=scan_ai-Manus-ai
AI_PORT=4601
CRAWLER_WORKERS=1
OPENAI_API_KEY=sk-staging-openai-key

# =============================================================================
# File Upload Settings
# =============================================================================
UPLOAD_DIR=/app/data/uploads
RESULTS_DIR=/app/data/results
MAX_FILE_SIZE=104857600
ALLOWED_FILE_TYPES=image/jpeg,image/png,image/jpg,image/webp,image/gif

# =============================================================================
# Email Settings (use test SMTP)
# =============================================================================
SMTP_HOST=smtp.mailtrap.io
SMTP_PORT=2525
SMTP_USER=staging_smtp_user
SMTP_PASSWORD=staging_smtp_password
SMTP_FROM_EMAIL=staging@gaara-scan-ai.com
SMTP_FROM_NAME=Gaara Scan AI (Staging)
SMTP_TLS=true

# =============================================================================
# Monitoring
# =============================================================================
SENTRY_DSN=https://staging-sentry-dsn@sentry.io/staging-project
PROMETHEUS_ENABLED=true
GRAFANA_ADMIN_PASSWORD=staging_grafana_password

# =============================================================================
# Docker Settings
# =============================================================================
COMPOSE_PROJECT_NAME=gaara-scan-ai-staging
DOCKER_BUILDKIT=1
RUN_MIGRATIONS=true
