#!/bin/bash

echo "========================================"
echo "    ูุธุงู ุฅุฏุงุฑุฉ ุงููุฎุฒูู ุงูุฒุฑุงุนู"
echo "========================================"
echo

echo "๐ ุชุดุบูู ุงููุธุงู..."
echo

echo "๐ ุชุดุบูู ูุงุนุฏุฉ ุงูุจูุงูุงุช..."
cd backend
python3 database_setup.py
echo

echo "๐ง ุชุดุบูู ุงูุฎุงุฏู ุงูุฎููู..."
python3 app_with_database.py &
BACKEND_PID=$!
echo "โ ุงูุฎุงุฏู ุงูุฎููู ูุนูู ุนูู: http://localhost:8002"
echo

echo "๐ ุชุดุบูู ุงููุงุฌูุฉ ุงูุฃูุงููุฉ..."
cd ../frontend
npm run dev &
FRONTEND_PID=$!
echo "โ ุงููุงุฌูุฉ ุงูุฃูุงููุฉ ุณุชุนูู ุนูู: http://localhost:3004"
echo

echo "========================================"
echo "๐ ุงููุธุงู ุฌุงูุฒ ููุงุณุชุฎุฏุงู!"
echo "========================================"
echo
echo "๐ ุงูุชุญ ุงููุชุตูุญ ูุงุฐูุจ ุฅูู: http://localhost:3004"
echo "๐ ุชุณุฌูู ุงูุฏุฎูู: admin / admin123"
echo
echo "ุงุถุบุท Ctrl+C ูุฅููุงู ุงููุธุงู"

# ุงูุชุธุงุฑ ุฅุดุงุฑุฉ ุงูุฅููุงู
trap "echo 'ุฅููุงู ุงููุธุงู...'; kill $BACKEND_PID $FRONTEND_PID; exit" INT

# ุงูุชุธุงุฑ ูุง ููุงุฆู
while true; do
    sleep 1
done
