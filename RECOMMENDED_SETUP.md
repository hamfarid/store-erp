# ๐ ุงูุทุฑููุฉ ุงูููุตู ุจูุง ูุฅุนุฏุงุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช

## โ ุงุณุชุฎุฏู `simple_recreate_db.py`

ูุฐุง ุงูุณูุฑูุจุช ูู **ุงูุทุฑููุฉ ุงูููุตู ุจูุง** ูุฅูุดุงุก ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุฃูู:

1. โ **ูุง ูุนุชูุฏ ุนูู SQLAlchemy models** - ูุณุชุฎุฏู SQL ูุจุงุดุฑุฉ
2. โ **ููุดุฆ ุงูุฌุฏุงูู ุจุงูุชุฑุชูุจ ุงูุตุญูุญ** - ูุชุฌูุจ ูุดุงูู Foreign Keys
3. โ **ูุง ุชูุฌุฏ ุชุนุฑููุงุช ููุฑุฑุฉ** - ูุชุฌูุจ ูุดููุฉ "Multiple classes found"
4. โ **ุฃุณุฑุน ูุฃูุซุฑ ููุซูููุฉ** - ูุง ูุญุชุงุฌ ูุงุณุชูุฑุงุฏ ุงูููุงุฐุฌ
5. โ **ุณูู ุงูุตูุงูุฉ** - ูู ุดูุก ูู ููู ูุงุญุฏ

---

## ๐ง ููููุฉ ุงูุงุณุชุฎุฏุงู

### 1. ุดุบูู ุงูุณูุฑูุจุช:
```powershell
cd D:\APPS_AI\store\store_v1.6\backend
python simple_recreate_db.py
```

### 2. ุงููุชูุฌุฉ ุงููุชููุนุฉ:
```
============================================================
๐ ุฅุนุงุฏุฉ ุฅูุดุงุก ูุงุนุฏุฉ ุงูุจูุงูุงุช (ูุณุฎุฉ ูุจุณุทุฉ)
============================================================

๐ฆ ุงูุฎุทูุฉ 1: ูุณุฎ ุงุญุชูุงุทู...
โ ุชู ูุณุฎ ูุงุนุฏุฉ ุงูุจูุงูุงุช ุฅูู database_archive/backup_*/inventory.db

๐๏ธ  ุงูุฎุทูุฉ 2: ุญุฐู ููุงุนุฏ ุงูุจูุงูุงุช ุงููุฏููุฉ...
โ ุชู ุญุฐู instance/inventory.db

๐ ุงูุฎุทูุฉ 3: ุฅูุดุงุก ูุงุนุฏุฉ ุจูุงูุงุช ุฌุฏูุฏุฉ...
๐ ุฅูุดุงุก ุงูุฌุฏุงูู...
โ ุชู ุฅูุดุงุก ุฌุฏูู roles
โ ุชู ุฅูุดุงุก ุฌุฏูู users
โ ุชู ุฅูุดุงุก ุฌุฏูู categories
โ ุชู ุฅูุดุงุก ุฌุฏูู customers
โ ุชู ุฅูุดุงุก ุฌุฏูู suppliers
โ ุชู ุฅูุดุงุก ุฌุฏูู warehouses
โ ุชู ุฅูุดุงุก ุฌุฏูู products
โ ุชู ุญูุธ ุฌููุน ุงูุฌุฏุงูู

๐ค ุฅูุดุงุก ุงูุจูุงูุงุช ุงูุฃุณุงุณูุฉ...
โ ุชู ุฅูุดุงุก ุงูุฃุฏูุงุฑ
โ ุชู ุฅูุดุงุก ูุณุชุฎุฏู admin
   Username: admin
   Password: u-fZEk2jsOQN3bwvFrj93A

============================================================
โ ุชู ุฅุนุงุฏุฉ ุฅูุดุงุก ูุงุนุฏุฉ ุงูุจูุงูุงุช ุจูุฌุงุญ!
============================================================
```

### 3. ุดุบูู Backend:
```powershell
python app.py
```

### 4. ุดุบูู Frontend (Terminal ุฌุฏูุฏ):
```powershell
cd ..\frontend
npm run dev
```

### 5. ุงูุชุญ ุงููุชุตูุญ:
```
http://localhost:5502
```

### 6. ุณุฌู ุงูุฏุฎูู:
```
Username: admin
Password: u-fZEk2jsOQN3bwvFrj93A
```

---

## โ๏ธ ููุงุฐุง ูุง ูุณุชุฎุฏู `recreate_database.py`ุ

ุงูุณูุฑูุจุช ุงููุฏูู `recreate_database.py` ูุนุงูู ูู ุงููุดุงูู ุงูุชุงููุฉ:

1. โ **ูุณุชูุฑุฏ ุงูููุงุฐุฌ** - ูุณุจุจ ุชุนุฑููุงุช ููุฑุฑุฉ
2. โ **ูุนุชูุฏ ุนูู SQLAlchemy** - ูุฏ ููุดู ุจุณุจุจ ุชุฑุชูุจ ุงูุฌุฏุงูู
3. โ **ุฃุจุทุฃ** - ูุญุชุงุฌ ูุงุณุชูุฑุงุฏ ุฌููุน ุงูููุงุฐุฌ
4. โ **ุฃูุซุฑ ุชุนููุฏุงู** - ูุนุชูุฏ ุนูู `app.py` ู `database.py`

---

## ๐ ุงูุฌุฏุงูู ุงูููุดุฃุฉ

| ุงูุฌุฏูู | ุงููุตู | Foreign Keys |
|--------|-------|--------------|
| `roles` | ุงูุฃุฏูุงุฑ (admin, manager, user) | - |
| `users` | ุงููุณุชุฎุฏููู | `role_id โ roles.id` |
| `categories` | ุงููุฆุงุช | `parent_id โ categories.id` |
| `customers` | ุงูุนููุงุก | - |
| `suppliers` | ุงูููุฑุฏูู | - |
| `warehouses` | ุงููุฎุงุฒู | `manager_id โ users.id` |
| `products` | ุงูููุชุฌุงุช | `category_id โ categories.id`<br>`supplier_id โ suppliers.id` |

---

## ๐ ุงูุชุญุฏูุซุงุช ุงููุณุชูุจููุฉ

ุฅุฐุง ุงุญุชุฌุช ูุฅุถุงูุฉ ุฌุฏุงูู ุฌุฏูุฏุฉ:

1. โ ุฃุถู ุงูุฌุฏูู ูู `simple_recreate_db.py`
2. โ ุชุฃูุฏ ูู ุงูุชุฑุชูุจ ุงูุตุญูุญ (ุงูุฌุฏุงูู ุงูุฃุณุงุณูุฉ ุฃููุงู)
3. โ ุฃุถู Foreign Keys ุจุดูู ุตุญูุญ
4. โ ุงุฎุชุจุฑ ุงูุณูุฑูุจุช

---

## ๐ ููุงุญุธุงุช ูููุฉ

### ุงููุณุฎ ุงูุงุญุชูุงุทูุฉ:
- โ ูุชู ุญูุธ ุงููุณุฎ ุงูุงุญุชูุงุทูุฉ ูู `database_archive/backup_YYYYMMDD_HHMMSS/`
- โ ููููู ุงุณุชุฑุฌุงุน ุงูุจูุงูุงุช ุงููุฏููุฉ ุฅุฐุง ุงุญุชุฌุชูุง

### ุงูุจูุงูุงุช ุงูุงูุชุฑุงุถูุฉ:
- โ ูุณุชุฎุฏู admin: `admin / u-fZEk2jsOQN3bwvFrj93A`
- โ 3 ุฃุฏูุงุฑ: admin, manager, user

### Foreign Keys:
- โ ููุนููุฉ ุจุดูู ุงูุชุฑุงุถู (`PRAGMA foreign_keys = ON`)
- โ ุชุณุชุฎุฏู `ON DELETE SET NULL` ูุชุฌูุจ ูุดุงูู ุงูุญุฐู

---

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุฎุทุฃ: "table already exists"
```powershell
# ุงุญุฐู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุฏููุงู
del instance\inventory.db
python simple_recreate_db.py
```

### ุฎุทุฃ: "no such table"
```powershell
# ุฃุนุฏ ุฅูุดุงุก ูุงุนุฏุฉ ุงูุจูุงูุงุช
python simple_recreate_db.py
```

### ุฎุทุฃ: "Multiple classes found"
```powershell
# ุงุณุชุฎุฏู simple_recreate_db.py ุจุฏูุงู ูู recreate_database.py
python simple_recreate_db.py
```

---

<div align="center">

# โ ุงูุทุฑููุฉ ุงูููุตู ุจูุง

**ุงุณุชุฎุฏู ุฏุงุฆูุงู `simple_recreate_db.py`**

```powershell
python simple_recreate_db.py
```

**ุฃุณุฑุน โข ุฃุจุณุท โข ุฃูุซุฑ ููุซูููุฉ**

</div>

