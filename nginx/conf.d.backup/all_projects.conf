# ==============================================
# Nginx Configuration - All Projects Port Forward
# ==============================================
# Updated: 2026-01-02
# Network: Ai_project
# ==============================================

# ===== Project 2: gold-price-predictor =====
# Backend: 2001, Frontend: 2501, ML: 2101, AI: 2601

upstream gold_backend {
    server gold-price-predictor-backend:2001;
}

upstream gold_frontend {
    server gold-price-predictor-frontend:2501;
}

upstream gold_ml {
    server gold-price-predictor-ml:2101;
}

upstream gold_ai {
    server gold-price-predictor-ai:2601;
}

server {
    listen 2001;
    server_name localhost;
    location / {
        proxy_pass http://gold_backend;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_cache_bypass $http_upgrade;
        proxy_read_timeout 300s;
        proxy_connect_timeout 75s;
    }
}

server {
    listen 2501;
    server_name localhost;
    location / {
        proxy_pass http://gold_frontend;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
    }
}

server {
    listen 2101;
    server_name localhost;
    location / {
        proxy_pass http://gold_ml;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_read_timeout 600s;
        client_max_body_size 100M;
    }
}

server {
    listen 2601;
    server_name localhost;
    location / {
        proxy_pass http://gold_ai;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_read_timeout 600s;
    }
}


# ===== Project 3: Zakat =====
# Backend: 3001, Frontend: 3501, ML: 3101, AI: 3601

upstream zakat_backend {
    server Zakat-backend:3001;
}

upstream zakat_frontend {
    server Zakat-frontend:3501;
}

upstream zakat_ml {
    server Zakat-ml:3101;
}

upstream zakat_ai {
    server Zakat-ai:3601;
}

server {
    listen 3001;
    server_name localhost;
    location / {
        proxy_pass http://zakat_backend;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_cache_bypass $http_upgrade;
    }
}

server {
    listen 3501;
    server_name localhost;
    location / {
        proxy_pass http://zakat_frontend;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
    }
}

server {
    listen 3101;
    server_name localhost;
    location / {
        proxy_pass http://zakat_ml;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
        proxy_read_timeout 600s;
        client_max_body_size 100M;
    }
}

server {
    listen 3601;
    server_name localhost;
    location / {
        proxy_pass http://zakat_ai;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
        proxy_read_timeout 600s;
    }
}


# ===== Project 4: scan_ai-Manus =====
# Backend: 4001, Frontend: 4501, ML: 4101, AI: 4601

upstream scan_backend {
    server scan_ai-Manus-backend:4001;
}

upstream scan_frontend {
    server scan_ai-Manus-frontend:4501;
}

upstream scan_ml {
    server scan_ai-Manus-ml:4101;
}

upstream scan_ai {
    server scan_ai-Manus-ai:4601;
}

server {
    listen 4001;
    server_name localhost;
    client_max_body_size 50M;
    location / {
        proxy_pass http://scan_backend;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_cache_bypass $http_upgrade;
        proxy_read_timeout 300s;
    }
}

server {
    listen 4501;
    server_name localhost;
    location / {
        proxy_pass http://scan_frontend;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
    }
}

server {
    listen 4101;
    server_name localhost;
    client_max_body_size 100M;
    location / {
        proxy_pass http://scan_ml;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_read_timeout 600s;
    }
}

server {
    listen 4601;
    server_name localhost;
    location / {
        proxy_pass http://scan_ai;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
        proxy_read_timeout 600s;
    }
}


# ===== Project 5: gaara_erp =====
# Backend: 5001, Frontend: 5501, ML: 5101, AI: 5601

upstream erp_backend {
    server gaara_erp-backend:5001;
}

upstream erp_frontend {
    server gaara_erp-frontend:5501;
}

upstream erp_ml {
    server gaara_erp-ml:5101;
}

upstream erp_ai {
    server gaara_erp-ai:5601;
}

server {
    listen 5001;
    server_name localhost;
    client_max_body_size 50M;
    location / {
        proxy_pass http://erp_backend;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_cache_bypass $http_upgrade;
    }
    location /static/ {
        proxy_pass http://erp_backend;
    }
    location /media/ {
        proxy_pass http://erp_backend;
    }
}

server {
    listen 5501;
    server_name localhost;
    location / {
        proxy_pass http://erp_frontend;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
    }
}

server {
    listen 5101;
    server_name localhost;
    client_max_body_size 100M;
    location / {
        proxy_pass http://erp_ml;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
        proxy_read_timeout 600s;
    }
}

server {
    listen 5601;
    server_name localhost;
    location / {
        proxy_pass http://erp_ai;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
        proxy_read_timeout 600s;
    }
}


# ===== Project 6: store =====
# Backend: 6001, Frontend: 6501, ML: 6101, AI: 6601

upstream store_backend {
    server store-backend:6001;
}

upstream store_frontend {
    server store-frontend:6501;
}

upstream store_ml {
    server store-ml:6101;
}

upstream store_ai {
    server store-ai:6601;
}

server {
    listen 6001;
    server_name localhost;
    client_max_body_size 50M;
    location / {
        proxy_pass http://store_backend;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_cache_bypass $http_upgrade;
    }
}

server {
    listen 6501;
    server_name localhost;
    location / {
        proxy_pass http://store_frontend;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
    }
}

server {
    listen 6101;
    server_name localhost;
    client_max_body_size 100M;
    location / {
        proxy_pass http://store_ml;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
        proxy_read_timeout 600s;
    }
}

server {
    listen 6601;
    server_name localhost;
    location / {
        proxy_pass http://store_ai;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
        proxy_read_timeout 600s;
    }
}
